===== 开始测试多个用户存款 =====

用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 准备存入 1000000000000000000000 代币...
用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 当前余额: 10000000000000000000000
授权代币给银行合约...
授权成功，查询授权额度...
银行合约授权额度: 1000000000000000000000
计算存款位置...
计算用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 存入后余额 1000000000000000000000 的插入位置...
用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 的下一个用户是: 0x0000000000000000000000000000000000000000
用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 是新用户，需要找到合适的插入位置
新用户插入位置: fromWhom=0x0000000000000000000000000000000000000000, toWhom=0x0000000000000000000000000000000000000001
执行存款交易...
存款后，用户 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 在银行的余额: 1000000000000000000000

用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 准备存入 2000000000000000000000 代币...
用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 当前余额: 10000000000000000000000
授权代币给银行合约...
授权成功，查询授权额度...
银行合约授权额度: 2000000000000000000000
计算存款位置...
计算用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 存入后余额 2000000000000000000000 的插入位置...
用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 的下一个用户是: 0x0000000000000000000000000000000000000000
用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 是新用户，需要找到合适的插入位置
检查节点 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266，余额: 1000000000000000000000
找到插入位置: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 的余额 1000000000000000000000 < 新余额 2000000000000000000000
新用户插入位置: fromWhom=0x0000000000000000000000000000000000000000, toWhom=0x0000000000000000000000000000000000000001
执行存款交易...
存款后，用户 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 在银行的余额: 2000000000000000000000

用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 准备存入 1500000000000000000000 代币...
用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 当前余额: 10000000000000000000000
授权代币给银行合约...
授权成功，查询授权额度...
银行合约授权额度: 1500000000000000000000
计算存款位置...
计算用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 存入后余额 1500000000000000000000 的插入位置...
用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 的下一个用户是: 0x0000000000000000000000000000000000000000
用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 是新用户，需要找到合适的插入位置
检查节点 0x70997970C51812dc3A010C7d01b50e0d17dc79C8，余额: 2000000000000000000000
检查节点 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266，余额: 1000000000000000000000
找到插入位置: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 的余额 1000000000000000000000 < 新余额 1500000000000000000000
新用户插入位置: fromWhom=0x0000000000000000000000000000000000000000, toWhom=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
执行存款交易...
存款后，用户 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 在银行的余额: 1500000000000000000000

用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 准备存入 3000000000000000000000 代币...
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 当前余额: 10000000000000000000000
授权代币给银行合约...
授权成功，查询授权额度...
银行合约授权额度: 3000000000000000000000
计算存款位置...
计算用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 存入后余额 3000000000000000000000 的插入位置...
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 的下一个用户是: 0x0000000000000000000000000000000000000000
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 是新用户，需要找到合适的插入位置
检查节点 0x70997970C51812dc3A010C7d01b50e0d17dc79C8，余额: 2000000000000000000000
找到插入位置: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 的余额 2000000000000000000000 < 新余额 3000000000000000000000
新用户插入位置: fromWhom=0x0000000000000000000000000000000000000000, toWhom=0x0000000000000000000000000000000000000001
执行存款交易...
存款后，用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 在银行的余额: 3000000000000000000000

用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 准备存入 500000000000000000000 代币...
用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 当前余额: 10000000000000000000000
授权代币给银行合约...
授权成功，查询授权额度...
银行合约授权额度: 500000000000000000000
计算存款位置...
计算用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 存入后余额 500000000000000000000 的插入位置...
用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 的下一个用户是: 0x0000000000000000000000000000000000000000
用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 是新用户，需要找到合适的插入位置
检查节点 0x90F79bf6EB2c4f870365E785982E1f101E93b906，余额: 3000000000000000000000
检查节点 0x70997970C51812dc3A010C7d01b50e0d17dc79C8，余额: 2000000000000000000000
检查节点 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC，余额: 1500000000000000000000
检查节点 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266，余额: 1000000000000000000000
新用户插入位置: fromWhom=0x0000000000000000000000000000000000000000, toWhom=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
执行存款交易...
存款后，用户 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65 在银行的余额: 500000000000000000000

获取前3名存款用户...
前3名存款用户:
#1: 0x90F79bf6EB2c4f870365E785982E1f101E93b906 - 余额: 3000000000000000000000
#2: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 - 余额: 2000000000000000000000
#3: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC - 余额: 1500000000000000000000

===== 开始测试存款和取款 =====
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 当前银行余额: 3000000000000000000000
准备取款 1000000000000000000000 代币...
计算用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 存入后余额 2000000000000000000000 的插入位置...
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 的下一个用户是: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 是已存在的用户，需要找到当前位置和新位置
找到用户在链表中的位置: 前一个节点=0x0000000000000000000000000000000000000001
检查节点 0x70997970C51812dc3A010C7d01b50e0d17dc79C8，余额: 2000000000000000000000
检查节点 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC，余额: 1500000000000000000000
找到插入位置: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC 的余额 1500000000000000000000 < 新余额 2000000000000000000000
现有用户新插入位置: fromWhom=0x0000000000000000000000000000000000000001, toWhom=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
执行取款交易...
取款后，用户 0x90F79bf6EB2c4f870365E785982E1f101E93b906 在银行的余额: 2000000000000000000000

取款后查询前3名存款用户...
前3名存款用户:
#1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 - 余额: 2000000000000000000000
#2: 0x90F79bf6EB2c4f870365E785982E1f101E93b906 - 余额: 2000000000000000000000
#3: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC - 余额: 1500000000000000000000

===== 所有测试完成 =====